@page
@using System.Text.Json
@using BattleshipBrain
@model WebApp.Pages.Games.Play.IndexModel

<style>    
   .bs-cell {
       height: 40px; 
       width: 40px;
       cursor: pointer;
   }
   .bomb {
        background-color: #b6e6ff;
   }   
   .ship {
        background-color: #8fff78;
   }
   

       
</style>

@{
    ViewData["Title"] = "Index";
    String boardJson = JsonSerializer.Serialize(Model.Board);
    String isBomb = "";
    String isShip = "";
    BoardSquareState bss;
    
}

<h1>Play this game</h1>

<p>Board is iterated here and redirected to games after that.</p>

<div class="row">
    <div class="col-6">
        
        <table class="table-bordered">
            
            @foreach (var row in Model.Board.Rows!)
            {
                <tr>
                    
                    @foreach (var coord in row.Coordinates)
                    {
                        bss = coord.BoardSquareState;
                        isBomb = coord.BoardSquareState.IsBomb ? "bomb" : "";
                        isShip = coord.BoardSquareState.IsShip ? "ship" : "";
                        <td onclick="window.location='?x=@coord.X&y=@coord.Y&id=@Model.GameId&move=true'" class="bs-cell @isBomb @isShip">
        
                            @if (bss.IsBomb)
                            {
                                <text>bomb</text>
                            }
                            else
                            {
                                <text>x: @coord.X <br/>y: @coord.Y</text>
                            }
                        </td>
                    }
                </tr>
        
            }
            
        </table>
        
    </div>

</div>


@* @boardJson; *@



    

    
